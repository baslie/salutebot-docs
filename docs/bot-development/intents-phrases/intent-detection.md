---
title: "Определение интента"
source_url: "https://github.com/baslie/salutebot-docs/blob/main/docs/bot-development/intents-phrases/intent-detection.md"
description: "Документация для разработчиков | Разработка чат-ботов"
reading_time: 1
badges: ["SaluteBot", "Code"]
toc:
  - title: "Механизм активации правил"
    level: 2
    id: "mehanizm-aktivatsii-pravil"
  - title: "Пример сценария"
    level: 2
    id: "primer-stsenariya"
  - title: "Обработка нераспознанных запросов"
    level: 2
    id: "obrabotka-neraspoznannyh-zaprosov"
---

<!-- Бейджи: SaluteBot | Code -->

# Определение интента

Содержание раздела

* [Механизм активации правил](#механизм-активации-правил)
* [Пример сценария](#пример-сценария)
* [Обработка нераспознанных запросов](#обработка-нераспознанных-запросов)

# Определение интента

Обновлено 13 февраля 2025

[![](/assets/bot-development/intents-phrases/intent-detection/salutebot-new.png)
SaluteBot](../../overview.md)[![](/assets/bot-development/intents-phrases/intent-detection/Code.png)
Code](https://developers.sber.ru/docs/ru/va/code/overview)

Интент пользователя определяется с помощью [паттернов](https://developers.sber.ru/docs/ru/va/code/nlp/patterns/about-patterns) и [классификатора Brain](https://developers.sber.ru/docs/ru/va/chat/voice-interface/command-recognition/nlu_core).

При использовании в одном сценарии паттернов, интентов и групп примеров, обработка правил активаций происходит с приоритетом по мере убывания:

1. Паттерны.
2. Группа примеров классификатора STS.
3. Интенты.

## Механизм активации правил

1. Если запрос пользователя сработал в стейте с паттерном, группой примеров `e!` и интентом, то приоритет будет у паттерна. Сработает стейт с паттерном.
2. Если запрос пользователя сработал в стейте с группой примеров `e!` и интентом, то приоритет будет у группы примеров. Cработает стейт с группой примеров.
3. Если запрос пользователя сработал только в стейте с интентом, отработает только он.
4. В остальных случаях запрос пользователя будет обработан стейтом `CatchAll`.

## Пример сценария

Рассмотрим сценарий:

```
theme: /

    state: Pattern
        q!: * паттерн *
        a: Сработал паттерн

    state: Example
        e!: паттерн
        a: Этот пример не срабатывает, потому что отрабатывает паттерн

    state: Second example
        e!: пример
        a: Сработал пример

    state:
        intent!: /паттерн
        a: Этот пример не срабатывает, потому что отрабатывает паттерн

    state:
        intent!: /пример
        a: Этот пример не срабатывает, потому что отрабатывает группа примеров

    state: Intent
        intent!: /интент
        a: Сработал интент

    state: CatchAll
        event: noMatch
        a: Вы сказали: {{ $request.query }}
```

При этом тренировочные фразы для интентов:

* `/паттерн` — паттерн;
* `/пример` — пример;
* `/интент` — интент.

Запускаем тестовый виджет и проверям сценарий:

1. При запросе `Паттерн` отрабатывает стейт `Pattern`.
2. При запросе `Пример` отрабатывает стейт `Second example`.
3. При запросе `Интент` отрабатывает стейт `Intent`.
4. Все непредусмотренные сценарием запросы обрабатывает стейт `CatchAll`.

При использовании в одном сценарии паттернов, интентов и групп примеров, вы можете самостоятельно [определить приоритет обработки правил активаций](https://developers.sber.ru/docs/ru/va/chat/voice-interface/command-recognition/rule_activation).

## Обработка нераспознанных запросов

В проектах с несколькими типами правил активации не используйте паттерн * для обработки нераспознанных запросов::

```
    state: CatchAll
        q!: *
        a: Не понял
```

В такой стейт будут попадать все запросы, не распознанные при помощи других паттернов. При этом примеры и интенты будут игнорироваться, поскольку приоритет у паттерна будет выше

Для непредусмотренных сценарием запросов пользователя используйте событие [`noMatch`](https://developers.sber.ru/docs/ru/va/code/response/events-table):

```
    state: CatchAll
        event: noMatch
        a: Вы сказали: {{ $request.query }}
```

Заметили ошибку?

Выделите текст и нажмите `Ctrl` + `Enter`, чтобы сообщить нам о ней
