---
title: "Конфигурационный файл"
source_url: "https://github.com/baslie/salutebot-docs/blob/main/docs/bot-development/project-structure/configuration-file.md"
description: "Документация для разработчиков | Разработка чат-ботов"
reading_time: 1
badges: ["SaluteBot", "Code"]
toc:
  - title: "Имя чат-бота"
    level: 2
    id: "imya-chat-bota"
  - title: "Главный файл"
    level: 2
    id: "glavnyy-fayl"
  - title: "XML-тесты сценариев"
    level: 2
    id: "xml-testy-stsenariev"
  - title: "Язык чат-бота по умолчанию"
    level: 2
    id: "yazyk-chat-bota-po-umolchaniyu"
  - title: "Сообщения об ошибках"
    level: 2
    id: "soobsheniya-ob-oshibkah"
  - title: "Подключение зависимостей"
    level: 2
    id: "podklyuchenie-zavisimostey"
  - title: "Секция Injector"
    level: 2
    id: "sektsiya-injector"
---

<!-- Бейджи: SaluteBot | Code -->

# Конфигурационный файл

Содержание раздела

* [Имя чат-бота](#имя-чат-бота)
* [Главный файл](#главный-файл)
* [XML-тесты сценариев](#xml-тесты-сценариев)
* [Язык чат-бота по умолчанию](#язык-чат-бота-по-умолчанию)
* [Сообщения об ошибках](#сообщения-об-ошибках)
* [Подключение зависимостей](#подключение-зависимостей)
* [Секция Injector](#секция-injector)

Развернуть

# Конфигурационный файл

Обновлено 4 марта 2025

[![](/assets/bot-development/project-structure/configuration-file/salutebot-new.png)
SaluteBot](../../overview.md)[![](/assets/bot-development/project-structure/configuration-file/Code.png)
Code](https://developers.sber.ru/docs/ru/va/code/overview)

`chatbot.yaml` — главный конфигурационный файл чат-бота. Содержит имя главного файла сценария, информацию о подключаемых модулях, конфигурацию NLU-модуля, список тестов и другую конфигурационную информацию.

Ниже представлено описание общих настроек.

## Имя чат-бота

```
name: botName       //имя чат-бота
```

На основе этого параметра формируется имя zip-файла при выполнении команды `build` или `buildDeploy` и формируется `botId` при выполнении команды `deploy` и `buildDeploy`.

## Главный файл

```
entryPoint: main.sc
```

`main.sc` или `entryPoint.sc` — главный файл сценария чат-бота, с которого начинается загрузка сценария. Файл находится в папке `src`.

В начале сценария можно подгрузить другие сценарии или js-файлы. Для этого используйте тег `require`.

## XML-тесты сценариев

```
tests:
    include:
        - '**/*.xml'
    exclude:
        - broken.xml
```

XML-тесты сценариев позволяют проверить логику чат-бота, эмулируя запросы клиента и проверяя ответы от ассистента.

Тесты выполняются автоматически при деплое чат-бота, если присутствуют в папке проекта `test`. Это поведение можно переопределить в секции `tests`.

Секция `tests` может содержать две подсекции `include` и `exclude`, каждая представляет собой список [ant-шаблонов](https://ant.apache.org/manual/dirtasks.html#patterns) с именами файлов.

* `include` — будут выполнены тесты только из тех файлов, которые попадают под шаблоны, перечисленные в этой подсекции.
* `exclude` — из выполнения будут исключены все файлы, которые попадают под шаблоны, перечисленные в этой подсекции.

## Язык чат-бота по умолчанию

```
language: ru
```

Параметр `language` используется для установки языка чат-бота по умолчанию, то есть заполняется поле `$request.language`, если оно не было задано в запросе.

В дальнейшем `$request.language` используется для выдачи локализованных сообщений об ошибках, а также может быть использован в сценариях.

## Сообщения об ошибках

```
messages:
    onError:
        defaultMessage: Что-то пошло не так
        locales:
            ru: Что-то пошло не так
            en: Failed on request processing
```

Секция `message` позволяет переопределить текст сообщения об ошибках чат-бота.

Текст сообщения указывается в поле `defaultMessage`.

В случае ошибки, если поле не заполнено, ассистент не отвечает.

Локализованное сообщение выбирается в соответствии с языком клиента, который передается в параметре `$request.language`. Если параметр не передан, выводится сообщение из `defaultMessage`.

## Подключение зависимостей

```
dependencies:
    - name: common
      type: git
      url: https://<repository>
      version: heads/master
    - name: another_common
      type: git
      url: https://<repository>
      version: heads/master
```

Секция `dependencies` позволяет определить список зависимостей проекта.

| Поле | Возможные значения | Описания |
| --- | --- | --- |
| `name` | `<name>` | Имя модуля, которое будет использоваться при подключении файлов в директиве `require`. |
| `type` | `git`, `module` | Тип зависимости. Здесь: `git` — внешний git-репозиторий; `module` — указывает папку в случае, если в одном репозитории содержатся несколько модулей. |
| `url` | `http://` `git://` `file://` | `url`-адрес репозитория. Только для `git`-зависимостей. |
| `version` | `heads/master` | Версия зависимости, может указывать на `branch` или `tag`. Только для `git`-зависимостей. |

Зависимости скачиваются в папку `module` при деплое через веб-интерфейс.

## Секция Injector

```
injector:
    name: value
    var1: value2
```

Секция `injector` позволяет определить конфигурационные параметры чат-бота. Определенные здесь параметры будут доступны в скриптах чат-бота через переменную `$injector`.

[Подробнее о `$injector`](https://developers.sber.ru/docs/ru/va/code/js-api/variables/injector)

Заметили ошибку?

Выделите текст и нажмите `Ctrl` + `Enter`, чтобы сообщить нам о ней
